<div (hSwipe)="horizontalSwipe($event)"
     (vSwipe)="verticalSwipe($event)"
     [@openClose]="sliderState.slider.active ? 'open': 'close'"
     (@openClose.start)="display = 'block'" (@openClose.done)="afterOpenClose()"
     [ngStyle]="{display: display}"
     class="lightbox-slider-container"
     photoTouchmove
>
  <div #sliderOverlay class="background-overlay"></div>

  <div [@changeImage]="{value: animate, params: {startPosition: startPosition}}"
       (@changeImage.start)="hAnimationInProgress = true"
       (@changeImage.done)="changeImage()"
       class="slider" #slider>

    <photo-caption [currentImageIndex]="sliderState.slider.imageIndex"
                   [sliderImages]="sliderState.imageRange" #caption1></photo-caption>
    <photo-slider-image [currentImageIndex]="sliderState.slider.imageIndex"
                        [sliderImages]="sliderState.imageRange"
                        [caption]="caption1"></photo-slider-image>

    <photo-caption [currentImageIndex]="sliderState.slider.imageIndex"
                   [sliderImages]="sliderState.imageRange" #caption2></photo-caption>
    <photo-slider-image [currentImageIndex]="sliderState.slider.imageIndex"
                        [sliderImages]="sliderState.imageRange"
                        [caption]="caption2"></photo-slider-image>

    <photo-caption [currentImageIndex]="sliderState.slider.imageIndex"
                   [sliderImages]="sliderState.imageRange" #caption3></photo-caption>
    <photo-slider-image [currentImageIndex]="sliderState.slider.imageIndex"
                        [sliderImages]="sliderState.imageRange"
                        [caption]="caption3"></photo-slider-image>
  </div>

  <ng-template [ngIf]="controls && display === 'block'">
    <ng-container *ngTemplateOutlet="controls"></ng-container>
  </ng-template>

</div>
